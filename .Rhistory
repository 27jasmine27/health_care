"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
plot_ly(
overdose_age_groups2015,
x = ~colnames(overdose_age_groups2015),
y = ~as.numeric(as.vector(overdose_age_groups2015[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses")
)
# var <- "overdose_age_groups2017"
# View(eval(parse(text = var)))
library(dplyr)
library(plotly)
overdose_age_groups2017 <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
plot_ly(
overdose_age_groups2015,
x = ~colnames(overdose_age_groups2015),
y = ~as.numeric(as.vector(overdose_age_groups2015[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses")
title = "Opiod Overdoses in the US by age group"
)
# var <- "overdose_age_groups2017"
# View(eval(parse(text = var)))
library(dplyr)
library(plotly)
overdose_age_groups2017 <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
plot_ly(
overdose_age_groups2015,
x = ~colnames(overdose_age_groups2015),
y = ~as.numeric(as.vector(overdose_age_groups2015[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses"),
title = "Opiod Overdoses in the US by age group"
)
# var <- "overdose_age_groups2017"
# View(eval(parse(text = var)))
var <- paste0("overdose_age_groups", 2017)
library(dplyr)
library(plotly)
overdose_age_groups2017 <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
var <- paste0("overdose_age_groups", 2017)
test_data <- eval(parse(text = var))
# View(eval(parse(text = var)))
plot_ages <- function(test_data) {
plot_ly(
df,
x = ~colnames(df),
y = ~as.numeric(as.vector(df[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses"),
title = "Opiod Overdoses in the US by age group"
)
}
View(test_data)
library(dplyr)
library(plotly)
overdose_age_groups2017 <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
var <- paste0("overdose_age_groups", 2017)
test_data <- eval(parse(text = var))
# View(eval(parse(text = var)))
plot_ages <- function(test_data) {
plot_ly(
df,
x = ~colnames(df),
y = ~as.numeric(as.vector(df[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses"),
title = "Opiod Overdoses in the US by age group"
)
}
plot_ages(test_data)
library(dplyr)
library(plotly)
overdose_age_groups2017 <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
var <- paste0("overdose_age_groups", 2017)
test_data <- eval(parse(text = var))
# View(eval(parse(text = var)))
plot_ages <- function(df) {
plot_ly(
df,
x = ~colnames(df),
y = ~as.numeric(as.vector(df[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses"),
title = "Opiod Overdoses in the US by age group"
)
}
plot_ages(test_data)
library(dplyr)
library(plotly)
overdose_age_groups2017 <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
var <- paste0("overdose_age_groups", 2015)
test_data <- eval(parse(text = var))
# View(eval(parse(text = var)))
plot_ages <- function(df) {
plot_ly(
df,
x = ~colnames(df),
y = ~as.numeric(as.vector(df[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses"),
title = "Opiod Overdoses in the US by age group"
)
}
plot_ages(test_data)
library(dplyr)
library(plotly)
overdose_age_groups2017 <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
var <- paste0("overdose_age_groups", 2016)
test_data <- eval(parse(text = var))
# View(eval(parse(text = var)))
plot_ages <- function(df) {
plot_ly(
df,
x = ~colnames(df),
y = ~as.numeric(as.vector(df[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses"),
title = "Opiod Overdoses in the US by age group"
)
}
plot_ages(test_data)
library(dplyr)
library(plotly)
overdose_age_groups2017 <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
var <- paste0("overdose_age_groups", 2016)
test_data <- eval(parse(text = var))
# View(eval(parse(text = var)))
plot_ages <- function(df) {
plot_ly(
df,
x = ~colnames(df),
y = ~as.numeric(as.vector(df[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses"),
title = "Opiod Overdoses in the US by age group"
)
}
plot_ages(test_data)
library(dplyr)
library(plotly)
overdose_age_groups2017 <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2016 <- read.csv(
"data/overdose_age_groups_state2016.csv",
stringsAsFactors = FALSE
)
overdose_age_groups2015 <- read.csv(
"data/overdose_age_groups_state2015.csv",
stringsAsFactors = FALSE
)
# formats the data table given by changing column names and looking
# at all states
format_df <- function(df) {
colnames(df) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
filter(df, Location == "United States") %>%
select(-Total, -Location)
}
overdose_age_groups2017 <- format_df(overdose_age_groups2017)
overdose_age_groups2016 <- format_df(overdose_age_groups2016)
overdose_age_groups2015 <- format_df(overdose_age_groups2015)
var <- paste0("overdose_age_groups", 2015)
test_data <- eval(parse(text = var))
# View(eval(parse(text = var)))
plot_ages <- function(df) {
plot_ly(
df,
x = ~colnames(df),
y = ~as.numeric(as.vector(df[1,])),
type = "bar"
) %>%
layout(
xaxis = list(title = "Age Groups"),
yaxis = list(title = "Number of Opiod Overdoses"),
title = "Opiod Overdoses in the US by age group"
)
}
plot_ages(test_data)
runApp()
library(dplyr)
library(plotly)
library(openintro)
overdose_age_groups <- read.csv(
"data/overdose_age_groups_state2017.csv",
stringsAsFactors = FALSE
)
colnames(overdose_age_groups) <- c(
"Location",
"Ages 0-24",
"Ages 25-34",
"Ages 35-44",
"Ages 45-54",
"Ages 55+",
"Total"
)
overdose_age_groups[overdose_age_groups == "NSD"] <- "No sufficient data"
overdose_age_groups <- filter(overdose_age_groups, Location != "United States")
state_codes <- lapply(overdose_age_groups$Location, state2abbr)
overdose_age_groups$Location <- state_codes
View(overdose_age_groups)
runApp()
map code test
plot_geo(data = overdose_age_groups) %>%
add_trace(
z = ~overdose_age_groups[["Ages 55+"]],
locations = ~Location,
locationmode = "USA-states",
color = ~Total
) %>%
colorbar(title = "Overdoses") %>%
layout(
geo = list(scope = "usa"),
title = paste0("Opiod Overdoses in 2017 by State (", "Ages 55+", ")")
)
runApp()
